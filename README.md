# ginet

## This project was generated by [Flatlogic generator](https://flatlogic.com/generator).

  - Frontend: [Angular](https://flatlogic.com/templates?framework%5B%5D=angular&sort=default)

  - Design: [Material UI](https://flatlogic.com/templates?design%5B%5D=material&sort=default)

  - Backend: [NodeJS](https://flatlogic.com/templates?backend%5B%5D=nodejs&sort=default)

  - Database: PostgreSQL

### We offer 2 ways how to start the project locally: by running Frontend and Backend or with Docker.

## To start the project:

### Backend:

  ##### Install local dependencies:
  - `yarn install`

  ------------

  ##### Adjust local db:
  ###### 1.  Install postgres:
  - MacOS:
  - `brew install postgres`

    > if you don’t have ‘brew‘ please install it (https://brew.sh) and repeat step `brew install postgres`.

  - Ubuntu:
  - `sudo apt update`
  - `sudo apt install postgresql postgresql-contrib`

  ###### 2. Create db and admin user:
  - Before run and test connection, make sure you have created a database as described in the above configuration. You can use the `psql` command to create a user and database.
  - `psql postgres --u postgres`

  - Next, type this command for creating a new user with password then give access for creating the database.
  - `postgres-# CREATE ROLE admin WITH LOGIN PASSWORD 'admin_pass';`
  - `postgres-# ALTER ROLE admin CREATEDB;`

  - Quit `psql` then log in again using the new user that previously created.
  - `postgres-# \q`
  - `psql postgres -U admin`

  - Type this command to creating a new database.
  - `postgres=> CREATE DATABASE development;`

  - Then give that new user privileges to the new database then quit the `psql`.
  - `postgres=> GRANT ALL PRIVILEGES ON DATABASE development TO admin;`
  - `postgres=> \q`

  ------------

  ##### Create database:
  - `yarn db:create`

  ##### Start production build:
  - `yarn start`

### Frontend:

  ## To start the project:

  Install dependencies via npm or yarn
  ```shell
  yarn install
  ```

  Run development server
  ```shell
  yarn start
  ```

## To start the project with Docker:
  ## Description:

  The project contains `docker-compose.yml` and a couple of helper scripts:

  - `docker-compose.yml` (all our services: web, backend, db are described here)
  - `start-backend.sh` (starts nodejs app)
  - `wait-for-it.sh` (imported from https://github.com/vishnubob/wait-for-it)

  ## Run services:

  1. Install docker compose (https://docs.docker.com/compose/install/)

  2. Move to `docker` folder. All next steps should be done from this folder.

  ``` cd docker ```

  3. Make executables from `wait-for-it.sh` and `start-backend.sh`:

  ``` chmod +x start-backend.sh && chmod +x wait-for-it.sh ```

  4. Download dependend projects for services.

  5. Review the docker-compose.yml file. Make sure that all services have Dockerfiles. Only db service doesn't require a Dockerfile. 

  6. Make sure you have needed ports (see them in `ports`) available on your local machine.

  7. Start services:

     7.1. With an empty database `rm -rf data && docker-compose up`

     7.2. With a stored (from previus runs) database data `docker-compose up`

  8. Check http://localhost:3000

  9. Stop services:

     9.1. Just press `Ctr+C`
